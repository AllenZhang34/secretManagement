(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bb41aed"],{"06c5":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a630"),r("fb6a"),r("b0c0"),r("d3b7"),r("25f0"),r("3ca3");var n=r("6b75");function a(e,t){if(e){if("string"===typeof e)return Object(n["a"])(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n["a"])(e,t):void 0}}},"0ccb":function(e,t,r){var n=r("50c4"),a=r("1148"),o=r("1d80"),i=Math.ceil,c=function(e){return function(t,r,c){var l,s,u=String(o(t)),d=u.length,f=void 0===c?" ":String(c),h=n(r);return h<=d||""==f?u:(l=h-d,s=a.call(f,i(l/f.length)),s.length>l&&(s=s.slice(0,l)),e?u+s:s+u)}};e.exports={start:c(!1),end:c(!0)}},1148:function(e,t,r){"use strict";var n=r("a691"),a=r("1d80");e.exports="".repeat||function(e){var t=String(a(this)),r="",o=n(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},2909:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("6b75");function a(e){if(Array.isArray(e))return Object(n["a"])(e)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function o(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var i=r("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return a(e)||o(e)||Object(i["a"])(e)||c()}},"4d90":function(e,t,r){"use strict";var n=r("23e7"),a=r("0ccb").start,o=r("9a0c");n({target:"String",proto:!0,forced:o},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"53ca":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}},"6b75":function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return n}))},"9a0c":function(e,t,r){var n=r("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},a434:function(e,t,r){"use strict";var n=r("23e7"),a=r("23cb"),o=r("a691"),i=r("50c4"),c=r("7b0b"),l=r("65f0"),s=r("8418"),u=r("1dde"),d=r("ae40"),f=u("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,p=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!h},{splice:function(e,t){var r,n,u,d,f,h,v=c(this),y=i(v.length),w=a(e,y),S=arguments.length;if(0===S?r=n=0:1===S?(r=0,n=y-w):(r=S-2,n=p(m(o(t),0),y-w)),y+r-n>b)throw TypeError(g);for(u=l(v,n),d=0;d<n;d++)f=w+d,f in v&&s(u,d,v[f]);if(u.length=n,r<n){for(d=w;d<y-n;d++)f=d+n,h=d+r,f in v?v[h]=v[f]:delete v[h];for(d=y;d>y-n+r;d--)delete v[d-1]}else if(r>n)for(d=y-n;d>w;d--)f=d+n-1,h=d+r-1,f in v?v[h]=v[f]:delete v[h];for(d=0;d<r;d++)v[d+w]=arguments[d+2];return v.length=y-n+r,u}})},a877:function(e,t,r){},acc3:function(e,t,r){"use strict";var n=r("a877"),a=r.n(n);a.a},c740:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").findIndex,o=r("44d2"),i=r("ae40"),c="findIndex",l=!0,s=i(c);c in[]&&Array(1)[c]((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!s},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o(c)},ed08:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return o}));r("4160"),r("c975"),r("b64b"),r("d3b7"),r("4d63"),r("ac1f"),r("25f0"),r("4d90"),r("5319"),r("1276"),r("159b");var n=r("53ca");function a(e,t){if(0===arguments.length||!e)return null;var r,a=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(n["a"])(e)?r=e:("string"===typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"===typeof e&&10===e.toString().length&&(e*=1e3),r=new Date(e));var o={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()},i=a.replace(/{([ymdhisa])+}/g,(function(e,t){var r=o[t];return"a"===t?["日","一","二","三","四","五","六"][r]:r.toString().padStart(2,"0")}));return i}function o(e){if(!e&&"object"!==Object(n["a"])(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(r){e[r]&&"object"===Object(n["a"])(e[r])?t[r]=o(e[r]):t[r]=e[r]})),t}},f982:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-upload"},on:{click:e.handleRoleCreate}},[e._v("创建角色")]),r("div",[r("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.roleList,border:""}},[r("el-table-column",{attrs:{label:"角色ID",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.id))])]}}])}),r("el-table-column",{attrs:{label:"角色名称",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.rolename))])]}}])}),r("el-table-column",{attrs:{label:"描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.description))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleRoleUpdate(n)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.handleRoleDelete(n)}}},[e._v("删除")])]}}])})],1)],1),r("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"70px"}},[r("el-form-item",{attrs:{label:"角色名称"}},[r("el-input",{model:{value:e.temp.rolename,callback:function(t){e.$set(e.temp,"rolename",t)},expression:"temp.rolename"}})],1),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea"},model:{value:e.temp.description,callback:function(t){e.$set(e.temp,"description",t)},expression:"temp.description"}})],1),r("el-form-item",{attrs:{label:"权限对象"}},[r("el-tree",{ref:"tree",staticClass:"permission-tree",attrs:{"check-strictly":e.checkStrictly,data:e.routesData,props:e.defaultProps,"show-checkbox":"","node-key":"path"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmRole}},[e._v("确认")])],1)],1)],1)},a=[],o=(r("a4d3"),r("e01a"),r("99af"),r("4de4"),r("c740"),r("4160"),r("caad"),r("a434"),r("b0c0"),r("2532"),r("159b"),r("5530")),i=r("2909"),c=(r("d28b"),r("d3b7"),r("3ca3"),r("ddb0"),r("06c5"));function l(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=Object(c["a"])(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r["return"]||r["return"]()}finally{if(l)throw o}}}}r("96cf");var s=r("1da1"),u=r("df7c"),d=r.n(u),f=r("ed08"),h=r("b775");function m(){return Object(h["a"])({url:"/vue-element-template/rolemanagement/routes",method:"get"})}function p(){return Object(h["a"])({url:"/vue-element-template/rolemanagement/list",method:"get"})}function b(e){return Object(h["a"])({url:"/vue-element-template/rolemanagement/create",method:"post",data:e})}function g(e){return Object(h["a"])({url:"/vue-element-template/rolemanagement/update",method:"post",data:e})}function v(e){return Object(h["a"])({url:"/vue-element-template/rolemanagement/".concat(e),method:"delete"})}var y={id:void 0,rolename:"",description:"",routes:[]},w={name:"RolemanagementList",data:function(){return{temp:Object.assign({},y),roleList:[],routes:[],dialogFormVisible:!1,checkStrictly:!1,dialogStatus:"",textMap:{update:"编辑角色",create:"创建角色"},defaultProps:{children:"children",label:"title"},rules:{rolename:[{required:!0,message:"请输入角色名称",trigger:"change"}],description:[{required:!0,message:"请输入描述",trigger:"change"}]}}},computed:{routesData:function(){return this.routes}},created:function(){this.getRoutes(),this.getRoles()},methods:{getRoutes:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:r=t.sent,e.serviceRoutes=r.data,e.routes=e.generateRoutes(r.data);case 5:case"end":return t.stop()}}),t)})))()},getRoles:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:r=t.sent,e.roleList=r.data;case 4:case"end":return t.stop()}}),t)})))()},generateRoutes:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=[],a=l(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(!o.hidden){var i=this.onlyOneShowingChild(o.children,o);o.children&&i&&!o.alwaysShow&&(o=i);var c={path:d.a.resolve(r,o.path),title:o.meta&&o.meta.title};o.children&&(c.children=this.generateRoutes(o.children,c.path)),n.push(c)}}}catch(s){a.e(s)}finally{a.f()}return n},generateArr:function(e){var t=this,r=[];return e.forEach((function(e){if(r.push(e),e.children){var n=t.generateArr(e.children);n.length>0&&(r=[].concat(Object(i["a"])(r),Object(i["a"])(n)))}})),r},generateTree:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2?arguments[2]:void 0,a=[],o=l(e);try{for(o.s();!(t=o.n()).done;){var i=t.value,c=d.a.resolve(r,i.path);i.children&&(i.children=this.generateTree(i.children,c,n)),(n.includes(c)||i.children&&i.children.length>=1)&&a.push(i)}}catch(s){o.e(s)}finally{o.f()}return a},onlyOneShowingChild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=null,n=e.filter((function(e){return!e.hidden}));return 1===n.length?(r=n[0],r.path=d.a.resolve(t.path,r.path),r):0===n.length&&(r=Object(o["a"])(Object(o["a"])({},t),{},{path:"",noShowingChildren:!0}),r)},handleRoleCreate:function(){this.temp=Object.assign({},y),this.$refs.tree&&this.$refs.tree.setCheckedNodes([]),this.dialogStatus="create",this.dialogFormVisible=!0},handleRoleUpdate:function(e,t){this.temp=Object.assign({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.checkStrictly=!0;var r=this.generateRoutes(this.temp.routes);this.$refs.tree.setCheckedNodes(this.generateArr(r)),this.checkStrictly=!1},confirmRole:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r="edit"===e.dialogStatus,n=e.$refs.tree.getCheckedKeys(),e.role.routes=e.generateTree(Object(f["a"])(e.serviceRoutes),"/",n),!r){t.next=11;break}return a=Object.assign({},e.temp),t.next=7,g(a);case 7:o=e.roleList.findIndex((function(t){return t.id===e.temp.id})),e.roleList.splice(o,1,e.temp),t.next=14;break;case 11:return t.next=13,b(e.temp);case 13:e.roleList.unshift(e.temp);case 14:i=e.role,c=i.description,i.key,i.name,e.dialogVisible=!1,e.$notify({title:"成功",dangerouslyUseHTMLString:!0,message:"\n            <div>角色名称: ".concat(rolename,"</div>\n            <div>角色描述: ").concat(c,"</div>\n          "),type:"success"});case 17:case"end":return t.stop()}}),t)})))()},handleRoleDelete:function(e,t){var r=this;this.$confirm("确定要删除该角色吗?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,v(e.id);case 2:r.roleList.splice(t,1),r.$message({type:"success",message:"删除成功!"});case 4:case"end":return n.stop()}}),n)})))).catch((function(e){console.error(e)}))}}},S=w,x=(r("acc3"),r("2877")),j=Object(x["a"])(S,n,a,!1,null,"016dca99",null);t["default"]=j.exports}}]);